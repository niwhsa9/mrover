<!-- 
	This launch file should be run on the Jetson in order to start our drive, control, and auton software
	on the physical rover.
 -->
<launch>
<!--    <arg name="rvizconfig" default="$(find mrover)/config/rviz/auton_sim.rviz"/>-->
    <!--    <node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)" required="true"/>-->

    <!-- launch rover core nodes -->
    <include file="$(find mrover)/launch/rover_core.launch"/>

    <!-- params for hardware interfaces including IMU, GPS, and odrives -->
    <rosparam command="load" file="$(find mrover)/config/esw.yaml"/>

    <!-- IMU and GPS driver nodes -->
    <node name="imu_driver" pkg="mrover" type="imu_driver.py" output="screen"/>
    <node name="gps_driver" pkg="nmea_navsat_driver" type="nmea_serial_driver"/>

    <!-- teleop node for receiving commands from the gui -->
    <rosparam command="load" file="$(find mrover)/config/teleop.yaml"/>
    <node name="jetson_teleop" pkg="mrover" type="jetson_teleop.py"/>

    <!-- odrive controller node -->
    <node name="odrive_control" pkg="mrover" type="odrive_control.py" output="screen"/>

    <!-- launch auton -->
    <include file="$(find mrover)/launch/auton.launch"/>

    <group ns="zed2i">
        <!-- ZED wrapper node -->
        <node name="zed_node" pkg="zed_wrapper" type="zed_wrapper_node" output="screen" required="true">
            <rosparam file="$(find mrover)/config/zed/common.yaml" command="load"/>
            <rosparam file="$(find mrover)/config/zed/zed2i.yaml" command="load"/>

            <remap to="/camera/color/image_raw" from="/zed2i/zed_node/rgb/image_rect_color"/>
            <remap to="/camera/depth/points" from="/zed2i/zed_node/point_cloud/cloud_registered"/>
            <remap to="/camera/color/camera_info" from="/zed2i/zed_node/rgb/camera_info"/>
        </node>

        <!-- static TF publisher for ZED mount -->
        <node pkg="tf" type="static_transform_publisher" name="zed_mount_link_publisher"
              args="0.00635 0.169545 0.43815 1.570796 0 0 base_link zed_mount_link 100"/>

        <!-- static TF publisher for ZED mount -->
<!--        <node pkg="tf" type="static_transform_publisher" name="bruh"-->
        <!--              args="0 0 0 0 0 0 1 odom base_link 100"/>-->
    </group>
</launch>
