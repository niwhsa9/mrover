<!-- 
    This rostest file launches an integration test that tests basic
    drive to waypoint functionality.
 -->
<launch>
    <!-- launch rover core nodes -->
    <include file="$(find mrover)/launch/rover_core.launch" />

    <!-- launch the simulator with no GUI -->
    <include file="$(find mrover)/launch/simulator.launch">
        <arg name="gui" value="false" />
    </include>

    <!-- navigation -->
    <node name="nav" pkg="mrover" type="navigation.py" />

    <rosparam command="load" file="$(find mrover)/config/localization.yaml" />

    <!-- Fuses together GPS position and IMU orientation with an Extended Kalman Filter (EKF) -->
    <!-- Publishes a resulting tf entry between odom and base_link -->
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_odom" clear_params="true">
        <remap from="imu" to="imu/data" />
    </node>

    <!-- Reads the GPS topic and convert it to cartesian based on a reference point-->
    <node pkg="robot_localization" type="navsat_transform_node" name="navsat_transform" clear_params="true" />

    <!-- node to manage and run the integration test -->
    <test test-name="integration" pkg="mrover" type="integration.py" />
</launch>